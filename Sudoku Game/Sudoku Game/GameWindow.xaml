<Window x:Class="Sudoku_Game.GameWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sudoku"
        Background="#111" Foreground="White"
        Width="1000" Height="760"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        <Style x:Key="PadButton" TargetType="Button">
            <Setter Property="Margin" Value="4"/>
            <Setter Property="MinWidth" Value="44"/>
            <Setter Property="MinHeight" Value="44"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- header -->
            <RowDefinition Height="*"/>
            <!-- boards + pad -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <!-- board -->
            <ColumnDefinition Width="320"/>
            <!-- right panel (pad) -->
        </Grid.ColumnDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Puzzle: " FontWeight="Bold" Margin="0,0,8,0"/>
            <TextBlock x:Name="HdrInfo"/>
        </StackPanel>

        <!-- Board -->
        <!-- Board -->
        <Border Grid.Row="1" Grid.Column="0"
        BorderBrush="#444" BorderThickness="1" Padding="6"
        CornerRadius="6" Background="#1a1a1a">
            <Viewbox Stretch="Uniform" StretchDirection="Both">
                <!-- IMPORTANT: must be a Grid named PuzzleGrid -->
                <Grid x:Name="PuzzleGrid" SnapsToDevicePixels="True" UseLayoutRounding="True"/>
            </Viewbox>
        </Border>


        <!-- Right panel: Selected + Number pad -->
        <StackPanel Grid.Row="1" Grid.Column="1" Margin="12,0,0,0">
            <TextBlock Text="Selected" FontWeight="Bold" Margin="0,0,0,6"/>
            <Border CornerRadius="8" Padding="10" Background="#202020" BorderBrush="#444" BorderThickness="1">
                <TextBlock x:Name="SelectedText" Text="—" FontSize="32" FontWeight="Bold" HorizontalAlignment="Center"/>
            </Border>

            <TextBlock Text="Numbers" FontWeight="Bold" Margin="0,16,0,6"/>
            <Border CornerRadius="8" Padding="8" Background="#202020" BorderBrush="#444" BorderThickness="1">
                <UniformGrid x:Name="PickerGrid"/>
            </Border>

            <!-- NEW: only visible in Medium -->
            <Button x:Name="CheckBtn" Content="Check (3 left)" Click="Check_Click"
          Style="{StaticResource PadButton}" Margin="0,16,0,0" Visibility="Collapsed"/>

            <Button Content="Clear" Click="Clear_Click" Style="{StaticResource PadButton}" Margin="0,8,0,0"/>
            <Button Content="Give Up" Click="GiveUp_Click" Style="{StaticResource PadButton}" 
                    Margin="0,8,0,0" Background="#F44336" Foreground="White"/>
            <Button Content="New Puzzle" Click="NewPuzzle_Click" Style="{StaticResource PadButton}" />
        </StackPanel>

        <!-- Celebration Overlay -->
        <Grid x:Name="CelebrationOverlay" Grid.Row="0" Grid.RowSpan="2" Grid.ColumnSpan="2" 
              Background="#CC000000" Visibility="Collapsed" Panel.ZIndex="1000">
            <Grid.Resources>
                <Storyboard x:Key="CelebrationAnimation" RepeatBehavior="Forever">
                    <!-- We'll add animation programmatically -->
                </Storyboard>
            </Grid.Resources>

            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <!-- Main celebration message -->
                <TextBlock x:Name="CelebrationText" 
                           Text="🎉 Puzzle Solved! 🎉"
                           FontSize="48" FontWeight="Bold"
                           Foreground="#FFD700"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"
                           TextAlignment="Center">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="#FFD700" BlurRadius="20" ShadowDepth="0" Opacity="0.8"/>
                    </TextBlock.Effect>
                </TextBlock>

                <!-- Secondary message -->
                <TextBlock x:Name="CelebrationSubtext"
                           Text="Nice work!"
                           FontSize="24"
                           Foreground="White"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,30"
                           TextAlignment="Center"/>

                <!-- Continue button -->
                <Button Content="Continue" 
                        Click="CelebrationContinue_Click"
                        Width="200" Height="50"
                        FontSize="18" FontWeight="Bold"
                        Background="#4CAF50" Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Effect>
                        <DropShadowEffect Color="Black" BlurRadius="10" ShadowDepth="3"/>
                    </Button.Effect>
                </Button>
            </StackPanel>

            <!-- Fireworks/Confetti Canvas -->
            <Canvas x:Name="FireworksCanvas" IsHitTestVisible="False"/>
        </Grid>

        <!-- Generic Dialog Overlay (for all other dialogs) -->
        <Grid x:Name="DialogOverlayGrid" Grid.Row="0" Grid.RowSpan="2" Grid.ColumnSpan="2" 
              Background="#DD000000" Visibility="Collapsed" Panel.ZIndex="999">
            
            <Border Background="#1a1a1a" 
                    BorderBrush="#444" 
                    BorderThickness="2"
                    CornerRadius="12"
                    Padding="30"
                    MaxWidth="500"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect Color="Black" BlurRadius="30" ShadowDepth="0" Opacity="0.9"/>
                </Border.Effect>
                
                <StackPanel>
                    <!-- Dialog Title -->
                    <TextBlock x:Name="DialogTitle" 
                               Text="Dialog Title"
                               FontSize="24" 
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,20"/>
                    
                    <!-- Dialog Message -->
                    <TextBlock x:Name="DialogMessage" 
                               Text="Dialog message goes here"
                               FontSize="16"
                               Foreground="#CCC"
                               TextWrapping="Wrap"
                               HorizontalAlignment="Center"
                               TextAlignment="Center"
                               Margin="0,0,0,30"/>
                    
                    <!-- Dialog Buttons -->
                    <StackPanel x:Name="DialogButtons" 
                                Orientation="Horizontal"
                                HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </Grid>

    </Grid>
</Window>
